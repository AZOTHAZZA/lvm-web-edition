/**
 * lvm_bridge.js - v2.3.7
 * 確実な接続のためのイベント待機プロトコル
 */
const LVM_BRIDGE = {
    version: "2.3.7",
    init: function() {
        if (window.LogosStorage) {
            console.log("LVM_STORAGE: DETECTED.");
            this.logToTerminal(`SYSTEM_ONLINE: v${this.version} READY`, "system");
            if (window.updateVisualAssets) window.updateVisualAssets();
        } else {
 //           console.error("LVM_BRIDGE: LogosStorage still missing after load.");
        }
    },
    logToTerminal: function(msg, type = "") {
        if (typeof sysLog === 'function') sysLog(msg, type);
        else console.log(`[TERMINAL] ${msg}`);
    },
    processCommand: function(input) {
        const args = input.trim().toUpperCase().split(/\s+/);
        // ここで LogosStorage を window.LogosStorage として使う
        if (!window.LogosStorage) return this.logToTerminal("ERROR: STORAGE_LOST", "error");
        
        // ... (以下、GENERATE, MINT などの処理を window.LogosStorage 経由で記述)
    }
};

// 全てのファイルが読み込まれた「後」に初期化を実行
window.addEventListener('load', () => {
    window.LVM_BRIDGE = LVM_BRIDGE;
    LVM_BRIDGE.init();
});